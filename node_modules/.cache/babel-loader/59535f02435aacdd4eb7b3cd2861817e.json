{"ast":null,"code":"import _slicedToArray from\"/home/ubuntu/ci-cd/market-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import{useEffect,useState}from\"react\";import\"./index.css\";import{API_URL}from\"../config/constants\";import dayjs from\"dayjs\";import{Button,message,Spin}from\"antd\";import ProductCard from\"../components/productCard\";function ProductPage(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),products=_useState4[0],setProducts=_useState4[1];var getProduct=function getProduct(){axios.get(\"\".concat(API_URL,\"/products/\").concat(id)).then(function(result){setProduct(result.data.product);}).catch(function(error){console.error(error);});};var getRecommendations=function getRecommendations(){axios.get(\"\".concat(API_URL,\"/products/\").concat(id,\"/recommendation\")).then(function(result){setProducts(result.data.products);console.log(result.data.products);}).catch(function(error){console.error(error);});};useEffect(function(){getProduct();getRecommendations();},[id]);if(product===null){return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",paddingTop:32},children:/*#__PURE__*/_jsx(Spin,{size:\"large\"})});}var onClickPurchase=function onClickPurchase(){axios.post(\"\".concat(API_URL,\"/purchase/\").concat(id)).then(function(result){message.info(\"구매가 완료되었습니다\");getProduct();}).catch(function(error){message.error(\"\\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD588\\uC2B5\\uB2C8\\uB2E4. \".concat(error.message));});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{id:\"image-box\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(API_URL,\"/\").concat(product.imageUrl)})}),/*#__PURE__*/_jsxs(\"div\",{id:\"profile-box\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/avatar.png\"}),/*#__PURE__*/_jsx(\"span\",{children:product.seller})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"contents-box\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"name\",children:product.name}),/*#__PURE__*/_jsxs(\"div\",{id:\"price\",children:[product.price,\"\\uC6D0\"]}),/*#__PURE__*/_jsx(\"div\",{id:\"createdAt\",children:dayjs(product.createdAt).format(\"YYYY년 MM월 DD일\")}),/*#__PURE__*/_jsx(Button,{id:\"purchase-button\",size:\"large\",type:\"primary\",danger:true,onClick:onClickPurchase,disabled:product.soldout===1,children:\"\\uC7AC\\uBE68\\uB9AC \\uAD6C\\uB9E4\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"div\",{id:\"description-box\",children:/*#__PURE__*/_jsxs(\"pre\",{id:\"description\",children:[product.description,\" \"]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uCD94\\uCC9C \\uC0C1\\uD488\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexWrap:\"wrap\"},children:products.map(function(product,index){return/*#__PURE__*/_jsx(ProductCard,{product:product},index);})})]})]})]});}export default ProductPage;","map":{"version":3,"sources":["/home/ubuntu/ci-cd/market-frontend/src/product/index.js"],"names":["useParams","axios","useEffect","useState","API_URL","dayjs","Button","message","Spin","ProductCard","ProductPage","id","product","setProduct","products","setProducts","getProduct","get","then","result","data","catch","error","console","getRecommendations","log","textAlign","paddingTop","onClickPurchase","post","info","imageUrl","seller","name","price","createdAt","format","soldout","description","display","flexWrap","map","index"],"mappings":"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","sourcesContent":["import { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport \"./index.css\";\nimport { API_URL } from \"../config/constants\";\nimport dayjs from \"dayjs\";\nimport { Button, message, Spin } from \"antd\";\nimport ProductCard from \"../components/productCard\";\n\nfunction ProductPage() {\n  const { id } = useParams();\n  const [product, setProduct] = useState(null);\n  const [products, setProducts] = useState([]);\n  const getProduct = () => {\n    axios\n      .get(`${API_URL}/products/${id}`)\n      .then((result) => {\n        setProduct(result.data.product);\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  };\n  const getRecommendations = () => {\n    axios\n      .get(`${API_URL}/products/${id}/recommendation`)\n      .then((result) => {\n        setProducts(result.data.products);\n        console.log(result.data.products);\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  };\n  useEffect(() => {\n    getProduct();\n    getRecommendations();\n  }, [id]);\n\n  if (product === null) {\n    return (\n      <div style={{ textAlign: \"center\", paddingTop: 32 }}>\n        <Spin size=\"large\" />\n      </div>\n    );\n  }\n\n  const onClickPurchase = () => {\n    axios\n      .post(`${API_URL}/purchase/${id}`)\n      .then((result) => {\n        message.info(\"구매가 완료되었습니다\");\n        getProduct();\n      })\n      .catch((error) => {\n        message.error(`에러가 발생했습니다. ${error.message}`);\n      });\n  };\n\n  return (\n    <div>\n      <div id=\"image-box\">\n        <img src={`${API_URL}/${product.imageUrl}`} />\n      </div>\n      <div id=\"profile-box\">\n        <img src=\"/images/icons/avatar.png\" />\n        <span>{product.seller}</span>\n      </div>\n      <div id=\"contents-box\">\n        <div id=\"name\">{product.name}</div>\n        <div id=\"price\">{product.price}원</div>\n        <div id=\"createdAt\">\n          {dayjs(product.createdAt).format(\"YYYY년 MM월 DD일\")}\n        </div>\n        <Button\n          id=\"purchase-button\"\n          size=\"large\"\n          type=\"primary\"\n          danger\n          onClick={onClickPurchase}\n          disabled={product.soldout === 1}\n        >\n          재빨리 구매하기\n        </Button>\n        <div id=\"description-box\">\n          <pre id=\"description\">{product.description} </pre>\n        </div>\n        <div>\n          <h1>추천 상품</h1>\n          <div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\n            {products.map((product, index) => {\n              return <ProductCard key={index} product={product} />;\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ProductPage;\n"]},"metadata":{},"sourceType":"module"}