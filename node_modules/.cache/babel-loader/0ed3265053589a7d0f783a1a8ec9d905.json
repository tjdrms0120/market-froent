{"ast":null,"code":"import _slicedToArray from\"/home/ubuntu/ci-cd/market-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Form,Divider,Input,InputNumber,Button,Upload,message}from\"antd\";import\"./index.css\";import{ForkOutlined}from\"@ant-design/icons\";import{useState}from\"react\";import{API_URL}from\"../config/constants\";import axios from\"axios\";import{useHistory}from\"react-router-dom\";function UploadPage(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),imageUrl=_useState2[0],setImageUrl=_useState2[1];var history=useHistory();var onSubmit=function onSubmit(values){axios.post(\"\".concat(API_URL,\"/products\"),{name:values.name,description:values.description,seller:values.seller,price:parseInt(values.price),imageUrl:imageUrl}).then(function(result){console.log(result);history.replace(\"/\");}).catch(function(error){console.error(error);message.error(\"\\uC5D0\\uB7EC\\uAC00 \\uBC1C\\uC0DD\\uD588\\uC2B5\\uB2C8\\uB2E4. \".concat(error.message));});};var onChangeImage=function onChangeImage(info){if(info.file.status===\"uploading\"){return;}if(info.file.status===\"done\"){var response=info.file.response;var _imageUrl=response.imageUrl;setImageUrl(_imageUrl);}};return/*#__PURE__*/_jsx(\"div\",{id:\"upload-container\",children:/*#__PURE__*/_jsxs(Form,{name:\"\\uC0C1\\uD488 \\uC5C5\\uB85C\\uB4DC\",onFinish:onSubmit,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"upload\",label:/*#__PURE__*/_jsx(\"div\",{className:\"upload-label\",children:\"\\uC0C1\\uD488 \\uC0AC\\uC9C4\"}),children:/*#__PURE__*/_jsx(Upload,{name:\"image\",action:\"\".concat(API_URL,\"/image\"),listType:\"picture\",showUploadList:false,onChange:onChangeImage,children:imageUrl?/*#__PURE__*/_jsx(\"img\",{id:\"upload-img\",src:\"\".concat(API_URL,\"/\").concat(imageUrl)}):/*#__PURE__*/_jsxs(\"div\",{id:\"upload-img-placeholder\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/icons/camera.png\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uC774\\uBBF8\\uC9C0\\uB97C \\uC5C5\\uB85C\\uB4DC\\uD574\\uC8FC\\uC138\\uC694.\"})]})})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Form.Item,{label:/*#__PURE__*/_jsx(\"div\",{className:\"upload-label\",children:\"\\uD310\\uB9E4\\uC790 \\uBA85\"}),name:\"seller\",rules:[{required:true,message:\"판매자 이름을 입력해주세요\"}],children:/*#__PURE__*/_jsx(Input,{className:\"upload-name\",size:\"large\",placeholder:\"\\uC774\\uB984\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Form.Item,{name:\"name\",label:/*#__PURE__*/_jsx(\"div\",{className:\"upload-label\",children:\"\\uC0C1\\uD488 \\uC774\\uB984\"}),rules:[{required:true,message:\"상품 이름을 입력해주세요\"}],children:/*#__PURE__*/_jsx(Input,{className:\"upload-name\",size:\"large\",placeholder:\"\\uC0C1\\uD488 \\uC774\\uB984\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\"})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Form.Item,{name:\"price\",label:/*#__PURE__*/_jsx(\"div\",{className:\"upload-label\",children:\"\\uC0C1\\uD488 \\uAC00\\uACA9\"}),rules:[{required:true,message:\"상품 가격을 입력해주세요\"}],children:/*#__PURE__*/_jsx(InputNumber,{defaultValue:0,className:\"upload-price\",size:\"large\"})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Form.Item,{name:\"description\",label:/*#__PURE__*/_jsx(\"div\",{className:\"upload-label\",children:\"\\uC0C1\\uD488 \\uC18C\\uAC1C\"}),rules:[{required:true,message:\"상품 소개를 입력해주세요.\"}],children:/*#__PURE__*/_jsx(Input.TextArea,{size:\"large\",id:\"product-description\",showCount:true,maxLength:300,placeholder:\"\\uC0C1\\uD488 \\uC18C\\uAC1C\\uB97C \\uC801\\uC5B4\\uC8FC\\uC138\\uC694.\"})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Button,{id:\"submit-button\",size:\"large\",htmlType:\"submit\",children:\"\\uC0C1\\uD488 \\uB4F1\\uB85D\\uD558\\uAE30\"})})]})});}export default UploadPage;","map":{"version":3,"sources":["/home/ubuntu/ci-cd/market-frontend/src/upload/index.js"],"names":["Form","Divider","Input","InputNumber","Button","Upload","message","ForkOutlined","useState","API_URL","axios","useHistory","UploadPage","imageUrl","setImageUrl","history","onSubmit","values","post","name","description","seller","price","parseInt","then","result","console","log","replace","catch","error","onChangeImage","info","file","status","response","required"],"mappings":"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","sourcesContent":["import {\n  Form,\n  Divider,\n  Input,\n  InputNumber,\n  Button,\n  Upload,\n  message,\n} from \"antd\";\nimport \"./index.css\";\nimport { ForkOutlined } from \"@ant-design/icons\";\nimport { useState } from \"react\";\nimport { API_URL } from \"../config/constants\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction UploadPage() {\n  const [imageUrl, setImageUrl] = useState(null);\n  const history = useHistory();\n\n  const onSubmit = (values) => {\n    axios\n      .post(`${API_URL}/products`, {\n        name: values.name,\n        description: values.description,\n        seller: values.seller,\n        price: parseInt(values.price),\n        imageUrl: imageUrl,\n      })\n      .then((result) => {\n        console.log(result);\n        history.replace(\"/\");\n      })\n      .catch((error) => {\n        console.error(error);\n        message.error(`에러가 발생했습니다. ${error.message}`);\n      });\n  };\n  const onChangeImage = (info) => {\n    if (info.file.status === \"uploading\") {\n      return;\n    }\n    if (info.file.status === \"done\") {\n      const response = info.file.response;\n      const imageUrl = response.imageUrl;\n      setImageUrl(imageUrl);\n    }\n  };\n  return (\n    <div id=\"upload-container\">\n      <Form name=\"상품 업로드\" onFinish={onSubmit}>\n        <Form.Item\n          name=\"upload\"\n          label={<div className=\"upload-label\">상품 사진</div>}\n        >\n          <Upload\n            name=\"image\"\n            action={`${API_URL}/image`}\n            listType=\"picture\"\n            showUploadList={false}\n            onChange={onChangeImage}\n          >\n            {imageUrl ? (\n              <img id=\"upload-img\" src={`${API_URL}/${imageUrl}`} />\n            ) : (\n              <div id=\"upload-img-placeholder\">\n                <img src=\"/images/icons/camera.png\" />\n                <span>이미지를 업로드해주세요.</span>\n              </div>\n            )}\n          </Upload>\n        </Form.Item>\n        <Divider />\n        <Form.Item\n          label={<div className=\"upload-label\">판매자 명</div>}\n          name=\"seller\"\n          rules={[{ required: true, message: \"판매자 이름을 입력해주세요\" }]}\n        >\n          <Input\n            className=\"upload-name\"\n            size=\"large\"\n            placeholder=\"이름을 입력해주세요.\"\n          />\n        </Form.Item>\n        <Divider />\n        <Form.Item\n          name=\"name\"\n          label={<div className=\"upload-label\">상품 이름</div>}\n          rules={[{ required: true, message: \"상품 이름을 입력해주세요\" }]}\n        >\n          <Input\n            className=\"upload-name\"\n            size=\"large\"\n            placeholder=\"상품 이름을 입력해주세요\"\n          />\n        </Form.Item>\n        <Divider />\n        <Form.Item\n          name=\"price\"\n          label={<div className=\"upload-label\">상품 가격</div>}\n          rules={[{ required: true, message: \"상품 가격을 입력해주세요\" }]}\n        >\n          <InputNumber defaultValue={0} className=\"upload-price\" size=\"large\" />\n        </Form.Item>\n        <Divider />\n        <Form.Item\n          name=\"description\"\n          label={<div className=\"upload-label\">상품 소개</div>}\n          rules={[{ required: true, message: \"상품 소개를 입력해주세요.\" }]}\n        >\n          <Input.TextArea\n            size=\"large\"\n            id=\"product-description\"\n            showCount\n            maxLength={300}\n            placeholder=\"상품 소개를 적어주세요.\"\n          />\n        </Form.Item>\n        <Form.Item>\n          <Button id=\"submit-button\" size=\"large\" htmlType=\"submit\">\n            상품 등록하기\n          </Button>\n        </Form.Item>\n      </Form>\n    </div>\n  );\n}\n\nexport default UploadPage;\n"]},"metadata":{},"sourceType":"module"}